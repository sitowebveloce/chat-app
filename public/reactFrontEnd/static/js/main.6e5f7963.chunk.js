(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{157:function(e,t){},160:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(3),l=a.n(r),s=(a(72),a(5)),o=(a(73),a(187));a(74);function i(e){var t=e.handleChat,a=e.user,n=e.setUser,r=e.room,l=e.setRoom;return c.a.createElement("div",null,c.a.createElement("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),a.length>0&&r.length>0&&t(a,r)}},c.a.createElement(o.a,{id:"outlined-basic",label:"Username",value:a,onChange:function(e){return n(e.target.value)},variant:"outlined"}),c.a.createElement(o.a,{id:"outlined-basic",label:"Room",value:r,onChange:function(e){return l(e.target.value)},variant:"outlined"}),c.a.createElement("input",{className:"login-btn",type:"submit",placeholder:"Enter"})))}var m=a(25),u=a.n(m),h=a(59),g=(a(79),a(60)),p=a.n(g),f=a(188),d=a(61),E=a.n(d),v=a(10),b=a(62),N=a.n(b)()("localhost:3001"),j=Object(v.css)({height:300});function y(e){var t=c.a.useState(""),a=Object(s.a)(t,2),n=a[0],r=a[1],l=c.a.useState([]),i=Object(s.a)(l,2),m=i[0],g=i[1],d=c.a.useState({}),v=Object(s.a)(d,2),b=v[0],y=v[1],w=c.a.useState([]),O=Object(s.a)(w,2),S=O[0],x=O[1],C=c.a.useState(!0),k=Object(s.a)(C,2),R=k[0],U=k[1],W=c.a.useState("it"),A=Object(s.a)(W,2),B=A[0],D=A[1],F=e.username,I=e.room,J=e.city,L=e.setCity,M=c.a.useRef(),T=function(){var e=Object(h.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://geoplugin.net/json.gp",e.next=3,p.a.get("http://geoplugin.net/json.gp");case 3:t=e.sent,a=t.data,L(a.geoplugin_regionName),D(a.geoplugin_countryCode);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c.a.useEffect((function(){T(),N.emit("joinRoom",{username:F,room:I}),N.on("roomUsers",(function(e){e.room;var t=e.users;g(t)})),N.on("message",(function(e){U(!0),y(e)})),N.on("messages",(function(e){x(e)})),void 0!==M.current&&M.current.addEventListener("keypress",(function(){N.emit("typing",{username:F,room:I})}))}),[]);var _=m.map((function(e){return"\ud83e\uddd1 ".concat(e.username)})).join(" \n "),P=S.map((function(e){return c.a.createElement("div",{key:Object(f.a)(),className:"div-messages"},c.a.createElement("p",{className:"messages"},e.user," ",c.a.createElement("span",{className:"chat-time"},e.time)),c.a.createElement("p",{className:"text"},e.text))}));return c.a.createElement("div",{className:"chat-content"},c.a.createElement("div",{className:"chat-left"},c.a.createElement("div",null," ",c.a.createElement("h3",null,"Room: ")," ",I," "),c.a.createElement("div",null," ",c.a.createElement("h3",null,"User: ")," ",c.a.createElement("span",{className:"chat-users"}," ",_),"  "),c.a.createElement("div",null," ",c.a.createElement("h3",null,"City: "),c.a.createElement("span",{role:"img"}," ",J)),c.a.createElement("div",null," ",c.a.createElement("h3",null,"Flag: "),c.a.createElement("img",{className:"chat-flag",src:"https://www.countryflags.io/".concat(B,"/flat/64.png"),alt:"flag"}))),c.a.createElement("div",{className:"chat-right"},R?c.a.createElement("div",{className:"div-message"},(setTimeout((function(){U(!1)}),5e3),c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"message"},b.user," ",c.a.createElement("span",{className:"chat-time"},b.time)),c.a.createElement("p",{className:"text"},b.text)))):c.a.createElement("div",{className:"div-message hide"}),c.a.createElement(E.a,{className:j},c.a.createElement("div",{className:"chat-messages"},P)),c.a.createElement("div",{className:"chat-input-msg"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),N.emit("chatMessage",n),r("")}},c.a.createElement(o.a,{ref:M,className:"input-msg",id:"standard-full-width",label:"",style:{margin:8},placeholder:"".concat(F," do you feel happy?"),helperText:"".concat(F," insert a message."),fullWidth:!0,value:n,onChange:function(e){return r(e.target.value)},margin:"normal",InputLabelProps:{shrink:!0}})))))}var w=function(){var e=c.a.useState(!1),t=Object(s.a)(e,2),a=t[0],n=t[1],r=c.a.useState(""),l=Object(s.a)(r,2),o=l[0],m=l[1],u=c.a.useState(""),h=Object(s.a)(u,2),g=h[0],p=h[1],f=c.a.useState(""),d=Object(s.a)(f,2),E=d[0],v=d[1];return c.a.createElement("div",{className:"App"},c.a.createElement("h1",{className:"chat-title"}," ",c.a.createElement("span",{role:"img","aria-label":"chat"},"\ud83d\udcac")," Chat App"),a?c.a.createElement("a",{className:"chat-exit-btn",href:"/"},"Exit"):null,a?null:c.a.createElement(i,{handleChat:function(e,t){m(e),n(!a)},user:o,room:g,setUser:m,setRoom:p}),a?c.a.createElement(y,{username:o,room:g,city:E,setCity:v}):null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,t,a){e.exports=a(160)},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},79:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.6e5f7963.chunk.js.map